# Modern Pomodoro Timer for Windows

Windows 11のデザイン言語に調和するように設計された、軽量かつ高機能なポモドーロタイマーアプリケーションです。
PythonとCustomTkinterを用いて開発されており、タスク記録、CSVエクスポート、BGM再生、ミニモード、Windowsネイティブ通知などの機能を備えています。

## ✨ 主な機能

*   **モダンなUI**: Windows 11ライクな角丸デザインとダークモード対応。
*   **プリセットタイマー**: Focus (25分/50分) と Break (5分/15分) をワンクリックで切り替え。
*   **タスク記録**: 作業内容（タスク名）を入力してログに残すことが可能。
*   **作業履歴**: 日ごとの作業時間を自動集計し、アプリ内で閲覧可能。
*   **CSVエクスポート**: 蓄積されたログをExcel等で分析可能なCSV形式で出力。
*   **BGM再生**: 集中を助ける3種類のノイズ（ホワイト、ピンク、ブラウン）をBGMとして再生可能。
*   **ミニモード**: 作業の邪魔にならないコンパクトなウィンドウサイズに切り替え可能。
*   **通知機能**: タイマー終了時にWindows標準のトースト通知とアラーム音でお知らせ。
*   **常時最前面**: スイッチ一つでウィンドウを最前面に固定。

## 🛠 動作環境・使用技術

*   **OS**: Windows 10 / 11 (※通知機能に `winotify` を使用しているためWindows専用です)
*   **言語**: Python 3.x
*   **ライブラリ**:
    *   `customtkinter`: モダンなGUIを構築します。
    *   `pygame-ce`: BGMの再生に使用します。
    *   `winotify`: Windowsのネイティブ通知を表示します。
    *   `sqlite3` (標準): 作業履歴をデータベースに保存します。
    *   `winsound` (標準): アラーム音を鳴らします。

## 📦 セットアップ

1.  **リポジリトのクローン（またはファイルのダウンロード）**
    このリポジリトのファイルを、任意の場所に配置してください。

2.  **仮想環境の作成とライブラリのインストール**
    配置したフォルダでコマンドプロンプトやターミナルを開き、以下のコマンドを順に実行します。

    ```shell
    # 仮想環境を作成
    python -m venv .venv

    # 仮想環境をアクティベート
    .venv\Scripts\activate

    # 必要なライブラリを一括インストール
    pip install -r requirements.txt
    ```

## 🚀 使い方

セットアップ完了後、フォルダ内にある **`start.bat`** をダブルクリックするだけでアプリケーションが起動します。

---

## 📱 Windowsスタートメニューへの登録 (ネイティブアプリ化)

作成したプログラムを、通常のWindowsアプリと同じようにスタートメニューから検索・起動できるようにする手順です。
用途に合わせて、以下のどちらかの方法を選んでください。

### パターンA：開発版 (Pythonスクリプト) を登録する場合
コードを修正した際に、再ビルドなしで即座に反映させたい場合に便利です。

1.  **ショートカットの作成**
    `start.bat` を右クリックし、「ショートカットの作成」を選択します。

2.  **アイコンの変更 (任意)**
    作成したショートカットを右クリックして「プロパティ」→「アイコンの変更」から、お好みのアイコン（.icoファイル）を設定すると、よりアプリらしくなります。

3.  **スタートメニューフォルダへの配置**
    キーボードの `[Windows]` + `[R]` を押し、`shell:programs` と入力してEnterを押します。
    開いたフォルダに、作成したショートカットを移動し、名前を「ポモドーロタイマー」などに変更します。

### パターンB：配布版 (EXEファイル) を登録する場合
Python環境がないPCで使う場合や、完成品として固定したい場合に使用します。

1.  **ファイルの配置**
    生成された `pomodoro.exe`（および `work_log.db` などの関連ファイル）を、ドキュメントフォルダなどの消さない場所にフォルダを作って配置します。
    ※ `work_log.db` はexeと同じ場所に保存されるため、exe単体をデスクトップなどに移動させると履歴が引き継がれません。ショートカットでの運用を推奨します。

2.  **ショートカットの作成**
    `pomodoro.exe` を右クリックし、「ショートカットの作成」を選択します。

3.  **スタートメニューフォルダへの配置**
    キーボードの `[Windows]` + `[R]` を押し、`shell:programs` と入力してEnterを押します。
    開いたフォルダに、作成したショートカットを移動し、名前を「ポモドーロタイマー」などに変更します。

---

✅ **完了**
これで、Windowsキーを押して「ポモドーロ」と検索するだけでアプリが起動します。タスクバーへのピン留めも可能です。

## 🎵 BGMとサウンドについて

*   本アプリケーションは、集中力を高めるための背景ノイズとして「ホワイトノイズ」「ピンクノイズ」「ブラウンノイズ」を再生する機能があります。
*   これらの音声ファイル (`white_noise.wav`など) は、初回起動時などにファイルが存在しない場合、**プログラムによって自動的に生成されます**。そのため、ユーザーが音声ファイルを用意する必要はありません。
*   タイマー終了時のアラーム音は、Windowsの標準機能を利用して再生されます。

## 📂 データと履歴の保存場所について

本アプリは、実行ファイル（またはスクリプト）と同じディレクトリに `work_log.db` というデータベースファイルを自動生成して履歴を保存します。
履歴を引き継ぎたい場合は、この `work_log.db` ファイルをアプリケーション本体と一緒に移動させてください。

## 🔧 アプリケーション化（Exe化）の手順

PythonがインストールされていないPCでも実行できるように、単一の実行ファイル（.exe）に変換する手順です。

1.  **PyInstallerのインストール**
    （セットアップ時に作成した仮想環境内で）以下のコマンドを実行します。
    ```shell
    pip install pyinstaller
    ```

2.  **Exeファイルの作成**
    同じく仮想環境内で、以下のコマンドを実行します。
    ```shell
    pyinstaller --noconsole --onefile --icon=NONE pomodoro.py
    ```

3.  **実行**
    `dist` フォルダ内に生成された `pomodoro.exe` を使用してください。
    ※ 履歴を保存する `work_log.db` は、この `pomodoro.exe` と同じ場所に作成されます。